@page
@model WebApplication1.Pages.ForgotPasswordModel
@{
    ViewData["Title"] = "Forgot Password";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewData["Title"]</title>
    <link rel="stylesheet" href="~/css/forgot-password.css">
</head>
<body>
    <div class="forgot-container">
        <h1>Forgot Password?</h1>
        <p class="subtitle">Enter your email to receive a verification code</p>

        @if (!string.IsNullOrEmpty(Model.Message))
        {
            <div class="alert @(Model.IsSuccess ? "alert-success" : "alert-error")">
                @Model.Message
            </div>
        }

        @if (!Model.CodeSent)
        {
            <div class="form-card">
                <form method="post" asp-page-handler="SendCode">
                    <div class="input-group">
                        <input type="email" asp-for="Email" placeholder="Enter your email" required />
                    </div>

                    <button type="submit" class="btn-login">Send Code</button>
                </form>
            </div>
        }
        else
        {
            <div class="form-card">
                <form method="post" asp-page-handler="VerifyCode">
                    <input type="hidden" asp-for="Email" />

                    <div class="input-group">
                        <input type="text" asp-for="VerificationCode" placeholder="Enter 6-digit code"
                               required maxlength="6" pattern="[0-9]{6}" />
                    </div>

                    <div class="input-group">
                        <input type="password" asp-for="NewPassword" placeholder="New Password" required minlength="6" />
                    </div>

                    <div class="input-group">
                        <input type="password" asp-for="ConfirmPassword" placeholder="Confirm Password" required minlength="6" />
                    </div>

                    <button type="submit" class="btn-login">Reset Password</button>
                </form>
            </div>

            <div class="btn-secondary-card">
                <form method="post" asp-page-handler="SendCode">
                    <input type="hidden" asp-for="Email" />
                    <button type="submit" class="btn-secondary">Resend Code</button>
                </form>
            </div>
        }

        <div class="links">
            <a href="/Login" class="link">Back to Login</a>
        </div>
    </div>
</body>
</html>
